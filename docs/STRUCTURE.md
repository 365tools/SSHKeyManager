# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“¦ æ¨¡å—åŒ–æ¶æ„ (v2.1.0+)

ä» v2.1.0 å¼€å§‹ï¼Œé¡¹ç›®é‡‡ç”¨æ ‡å‡† Python åŒ…ç»“æ„ï¼Œæé«˜å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚

### ç›®å½•ç»“æ„

```
SSHManager/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ run_sshm.py             # PyInstaller æ„å»ºå…¥å£ï¼ˆç»å¯¹å¯¼å…¥ï¼‰
â”‚   â””â”€â”€ sshm/                   # ä¸»åŒ…
â”‚       â”œâ”€â”€ __init__.py         # åŒ…å…¥å£
â”‚       â”œâ”€â”€ __main__.py         # CLI å…¥å£ (python -m sshm)
â”‚       â”œâ”€â”€ constants.py        # å¸¸é‡å®šä¹‰
â”‚       â”‚
â”‚       â”œâ”€â”€ core/               # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ config.py       # SSH é…ç½®ç®¡ç†å™¨
â”‚       â”‚   â”œâ”€â”€ state.py        # çŠ¶æ€ç®¡ç†å™¨
â”‚       â”‚   â””â”€â”€ manager.py      # å¯†é’¥ç®¡ç†å™¨ï¼ˆä¸»ç±»ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ console.py      # æ§åˆ¶å°å·¥å…·
â”‚       â”‚   â””â”€â”€ system.py       # ç³»ç»Ÿæ“ä½œï¼ˆPATHç­‰ï¼‰
â”‚       â”‚
â”‚       â””â”€â”€ cli/                # å‘½ä»¤è¡Œç•Œé¢
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ parser.py       # å‚æ•°è§£æå™¨
â”‚           â”œâ”€â”€ commands.py     # å‘½ä»¤è·¯ç”±
â”‚           â””â”€â”€ interactive.py  # äº¤äº’å¼èœå•
â”‚
â”œâ”€â”€ scripts/                    # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ build_local.py
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”‚   â”œâ”€â”€ DEVELOPER.md
â”‚   â””â”€â”€ CHANGELOG.md
â”‚
â”œâ”€â”€ dist/                       # æ„å»ºè¾“å‡º
â”œâ”€â”€ build/                      # æ„å»ºä¸´æ—¶æ–‡ä»¶
â””â”€â”€ README.md
```

## ğŸ¯ æ¨¡å—èŒè´£

### 1. **core/** - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

#### `config.py` - SSH é…ç½®ç®¡ç†
- `SSHConfigManager` ç±»
- è´Ÿè´£ SSH config æ–‡ä»¶çš„è¯»å†™
- ç”Ÿæˆã€æ›´æ–°ã€åˆ é™¤ Host é…ç½®å—

#### `state.py` - çŠ¶æ€ç®¡ç†
- `StateManager` ç±»
- ç®¡ç†å¯†é’¥æ¿€æ´»çŠ¶æ€ï¼ˆJSON æŒä¹…åŒ–ï¼‰
- è¯»å†™ `.sshm_state` æ–‡ä»¶

#### `manager.py` - ä¸»ç®¡ç†å™¨
- `SSHKeyManager` ç±»ï¼ˆæ ¸å¿ƒï¼‰
- å¯†é’¥åˆ›å»ºã€åˆ é™¤ã€åˆ‡æ¢
- å¤‡ä»½ç®¡ç†
- Git ä»“åº“é…ç½®
- SSH è¿æ¥æµ‹è¯•

### 2. **utils/** - å·¥å…·å‡½æ•°

#### `console.py` - æ§åˆ¶å°å·¥å…·
- Windows UTF-8 ç¼–ç ä¿®å¤
- æ ¼å¼åŒ–è¾“å‡ºï¼ˆæ—¶é—´ã€å¤§å°ï¼‰
- ç”¨æˆ·ç¡®è®¤æç¤º
- æ‰“å°åˆ†éš”çº¿å’Œæ ‡é¢˜

#### `system.py` - ç³»ç»Ÿæ“ä½œ
- PATH ç¯å¢ƒå˜é‡é…ç½®
- Windows æ³¨å†Œè¡¨æ“ä½œ
- Unix Shell é…ç½®æ–‡ä»¶ä¿®æ”¹

### 3. **cli/** - å‘½ä»¤è¡Œç•Œé¢

#### `parser.py` - å‚æ•°è§£æ
- `create_parser()` å‡½æ•°
- argparse é…ç½®
- æ‰€æœ‰å‘½ä»¤å’Œå‚æ•°å®šä¹‰

#### `commands.py` - å‘½ä»¤è·¯ç”±
- `handle_command()` å‡½æ•°
- å°†å‘½ä»¤å‚æ•°è·¯ç”±åˆ°ä¸šåŠ¡é€»è¾‘
- å¼‚å¸¸å¤„ç†

#### `interactive.py` - äº¤äº’å¼èœå•
- åŒå‡»è¿è¡Œæ—¶çš„ç”¨æˆ·ç•Œé¢
- èœå•é€‰é¡¹å¤„ç†
- å¸®åŠ©ä¿¡æ¯æ˜¾ç¤º

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å¼€å‘æ¨¡å¼
```bash
# ä½œä¸ºæ¨¡å—è¿è¡Œ
python -m sshm list
python -m sshm add github email@example.com
```

### ç”Ÿäº§æ¨¡å¼
```bash
# æ‰“åŒ…åçš„å¯æ‰§è¡Œæ–‡ä»¶
sshm list
sshm add github email@example.com
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ ¸å¿ƒä¸šåŠ¡é€»è¾‘** â†’ `core/manager.py`
2. **æ–°çš„å·¥å…·å‡½æ•°** â†’ `utils/`
3. **æ–°çš„å‘½ä»¤** â†’ `cli/parser.py` + `cli/commands.py`

### æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶
```bash
python scripts/build_local.py
```

### æµ‹è¯•
```bash
# æµ‹è¯•æ¨¡å—
python -m sshm list

# æµ‹è¯•ç‰¹å®šåŠŸèƒ½
python -m sshm test --all
```

## ğŸ“Š ä»£ç ç»Ÿè®¡

| æ¨¡å— | æ–‡ä»¶ | è¡Œæ•° | èŒè´£ |
|------|------|------|------|
| core/manager.py | 1 | ~700 | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ |
| core/config.py | 1 | ~80 | SSH é…ç½®ç®¡ç† |
| core/state.py | 1 | ~60 | çŠ¶æ€æŒä¹…åŒ– |
| utils/console.py | 1 | ~90 | æ§åˆ¶å°å·¥å…· |
| utils/system.py | 1 | ~180 | ç³»ç»Ÿæ“ä½œ |
| cli/parser.py | 1 | ~120 | å‚æ•°è§£æ |
| cli/commands.py | 1 | ~60 | å‘½ä»¤è·¯ç”± |
| cli/interactive.py | 1 | ~120 | äº¤äº’èœå• |
| **æ€»è®¡** | **8** | **~1410** | **æ¨¡å—åŒ–** |

**å¯¹æ¯”åŸå§‹ç‰ˆæœ¬**: 1628 è¡Œå•æ–‡ä»¶ â†’ 8 ä¸ªæ–‡ä»¶å…± 1410 è¡Œ

## âœ… ä¼˜åŠ¿

1. **å¯ç»´æŠ¤æ€§** â¬†ï¸ - æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
2. **å¯æµ‹è¯•æ€§** â¬†ï¸ - å¯ä»¥ç‹¬ç«‹æµ‹è¯•æ¯ä¸ªæ¨¡å—
3. **å¯æ‰©å±•æ€§** â¬†ï¸ - æ–°åŠŸèƒ½æ·»åŠ ä¸å½±å“å…¶ä»–æ¨¡å—
4. **å¯å¯¼å…¥æ€§** â¬†ï¸ - å¯ä½œä¸ºåº“è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨
5. **ä»£ç å¤ç”¨** â¬†ï¸ - å·¥å…·å‡½æ•°å¯åœ¨å¤šå¤„ä½¿ç”¨
6. **å›¢é˜Ÿåä½œ** â¬†ï¸ - å‡å°‘ä»£ç å†²çª

## ğŸ”„ å¯¼å…¥ç¤ºä¾‹

```python
# å¯¼å…¥æ ¸å¿ƒç±»
from sshm import SSHKeyManager, SSHConfigManager, StateManager

# å¯¼å…¥å·¥å…·å‡½æ•°
from sshm.utils import print_section_header, format_timestamp

# ä½¿ç”¨
manager = SSHKeyManager()
manager.list_keys()
```

## ğŸ“ ç‰ˆæœ¬å†å²

- **v2.1.0** - æ¨¡å—åŒ–é‡æ„
- **v2.0.1** - æ–°å¢ use/info/test å‘½ä»¤
- **v2.0.0** - æ¶æ„é‡æ„ï¼ˆä¸‰ç±»è®¾è®¡ï¼‰
- **v1.x** - åˆå§‹ç‰ˆæœ¬

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. åœ¨å¯¹åº”æ¨¡å—ä¸­æ·»åŠ åŠŸèƒ½
2. æ›´æ–° `__init__.py` å¯¼å‡º
3. æ·»åŠ åˆ° `cli/parser.py` å’Œ `cli/commands.py`
4. æ›´æ–°æ–‡æ¡£
5. æµ‹è¯•æ‰€æœ‰å…¥å£æ–¹å¼

---

**æœ€ä½³å®è·µ**: å¼€å‘æ—¶ä½¿ç”¨ `python -m sshm`ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ‰“åŒ…åçš„å¯æ‰§è¡Œæ–‡ä»¶ `sshm`ã€‚
